---
layout: archive
---

<!-- Project Filters (shown instead of separate nav) -->
<div class="projects-filters-container">
  <nav class="projects-filters-desktop">
    <a href="#" class="filter-btn active" data-category="all"><span class="dot"></span>All</a>
    <a href="#" class="filter-btn" data-category="education"><span class="dot"></span>Education</a>
    <a href="#" class="filter-btn" data-category="culture"><span class="dot"></span>Culture</a>
    <a href="#" class="filter-btn" data-category="residential"><span class="dot"></span>Residential</a>
    <a href="#" class="filter-btn" data-category="remodel"><span class="dot"></span>Remodel</a>
  </nav>
</div>

<!-- Mobile/Tablet Sidebar Menu Toggle -->
<button class="sidebar-toggle" id="sidebarToggle">
  <span class="menu-icon">☰</span>
</button>

<!-- Sidebar Navigation -->
<div class="projects-sidebar" id="projectsSidebar">
  <div class="sidebar-header">
    <h3>Filter Projects</h3>
  </div>
  <nav class="projects-sidebar-nav">
    <a href="#" class="sidebar-category active" data-category="all"><span class="dot"></span>All</a>
    <a href="#" class="sidebar-category" data-category="education"><span class="dot"></span>Education</a>
    <a href="#" class="sidebar-category" data-category="culture"><span class="dot"></span>Culture</a>
    <a href="#" class="sidebar-category" data-category="residential"><span class="dot"></span>Residential</a>
    <a href="#" class="sidebar-category" data-category="remodel"><span class="dot"></span>Remodel</a>
  </nav>
</div>

<!-- Overlay for sidebar -->
<div class="sidebar-overlay" id="sidebarOverlay"></div>

<div class="projects-container">
  <div class="projects-showcase">
    {% assign entries = site[page.collection] | where_exp: "post", "post.hidden != true" %}
    
    {% for project in entries %}
    {% assign project_category = project.filter_tag | default: "all" %}
    
    <div class="project-showcase-item" data-category="{{ project_category }}">
      <div class="project-showcase-image">
        {% if project.hero_image %}
          <!-- Lazy loading image trio -->
          <img class="project-img tiny" src="{{ project.hero_image | relative_url }}?tr=h-6" alt="{{ project.title }}">
          <img class="project-img small" src="{{ project.hero_image | relative_url }}?tr=h-700" alt="{{ project.title }}">
          <img class="project-img full" src="" alt="{{ project.title }}">
        {% else %}
          <img src="/assets/images/projects/placeholder-project-hero.svg" alt="Project placeholder">
        {% endif %}
      </div>
      
      <div class="project-showcase-info">
        <!-- Project Logo -->
        {% if project.logo %}
        <div class="showcase-logo">
          <img src="{{ project.logo | relative_url }}" alt="{{ project.title }} logo">
        </div>
        {% endif %}
        
        <!-- Project Title -->
        <h2 class="showcase-title">{{ project.title }}</h2>
        
        <!-- Project Location -->
        {% if project.location %}
        <p class="showcase-location">{{ project.location | upcase }}</p>
        {% endif %}
        
        <!-- Project Year -->
        {% if project.year %}
        <p class="showcase-year">{{ project.year }}</p>
        {% endif %}
        
        <!-- Project Excerpt/Description -->
        {% if project.excerpt %}
        <p class="showcase-excerpt">{{ project.excerpt }}</p>
        {% elsif project.content %}
        <p class="showcase-excerpt">{{ project.content | strip_html | truncatewords: 30 }}</p>
        {% endif %}
        
        <!-- Link -->
        <a href="{{ project.url | relative_url }}" class="showcase-link">View Project →</a>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<style>
  * {
    box-sizing: border-box;
  }

  /* Hide archive page title */
  .page__title {
    display: none;
  }

  /* Desktop Header - Fixed centered tabs */
  .projects-filters-container {
    display: block;
    padding: 1.5rem 2rem;
    background-color: white;
    border-bottom: 1px solid #e0e0e0;
    text-align: center;
    position: sticky;
    top: 0;
    z-index: 100;

    @media (max-width: 1024px) {
      display: none;
    }
  }

  .projects-filters-desktop {
    display: flex;
    justify-content: center;
    gap: 2.5rem;
    flex-wrap: nowrap;
    max-width: 900px;
    margin: 0 auto;
    overflow-x: auto;
  }

  .filter-btn {
    text-decoration: none;
    color: #999;
    font-size: 0.9rem;
    font-weight: 500;
    letter-spacing: 0.3px;
    cursor: pointer;
    transition: all 0.3s ease;
    padding: 0.5rem 0;
    display: inline-flex;
    align-items: center;
    gap: 0.6rem;
    white-space: nowrap;
    flex-shrink: 0;

    &:hover {
      color: #2c3e50;
    }

    &.active {
      color: #2c3e50;
    }

    .dot {
      width: 6px;
      height: 6px;
      background-color: transparent;
      border-radius: 50%;
      transition: background-color 0.3s ease;
    }

    &.active .dot {
      background-color: #2c3e50;
    }
  }

  /* Sidebar Navigation - Hidden on desktop */
  .sidebar-toggle {
    display: none;
    position: fixed;
    top: 1.5rem;
    right: 2rem;
    z-index: 999;
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: #2c3e50;
    padding: 0.5rem;

    @media (max-width: 1024px) {
      display: block;
    }
  }

  .menu-icon {
    display: inline-block;
    font-size: 1.5rem;
  }

  .projects-sidebar {
    display: none;
    position: fixed;
    top: 0;
    right: -300px;
    width: 300px;
    height: 100vh;
    background-color: white;
    border-left: 1px solid #ddd;
    padding: 3rem 2rem 2rem 2rem;
    z-index: 1000;
    transition: right 0.3s ease;
    overflow-y: auto;

    @media (max-width: 1024px) {
      display: block;
    }

    &.active {
      right: 0;
    }
  }

  .sidebar-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.3);
    z-index: 998;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;

    &.active {
      display: block;
      opacity: 1;
      pointer-events: auto;
    }
  }

  .projects-sidebar-nav {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .sidebar-header {
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #e0e0e0;

    h3 {
      margin: 0;
      font-size: 0.95rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: #2c3e50;
    }
  }

  .sidebar-category {
    text-decoration: none;
    color: #999;
    font-size: 0.95rem;
    font-weight: 500;
    letter-spacing: 0.3px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.6rem;

    &:hover {
      color: #2c3e50;
    }

    &.active {
      color: #2c3e50;
    }

    .dot {
      width: 6px;
      height: 6px;
      background-color: transparent;
      border-radius: 50%;
      transition: background-color 0.3s ease;
      flex-shrink: 0;
    }

    &.active .dot {
      background-color: #2c3e50;
    }
  }

  /* Container and layout */
  .projects-container {
    display: flex;
    flex-direction: column;

    @media (max-width: 1024px) {
      flex-direction: column;
    }
  }

  .projects-showcase {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 0;
  }

  /* Desktop: Compact side-by-side layout with smaller images */
  .project-showcase-item {
    display: grid;
    grid-template-columns: 1fr 400px;
    gap: 1.5rem;
    align-items: flex-start;
    padding: 2rem 3rem;
    border-bottom: 1px solid #e0e0e0;
    min-height: auto;

    @media (max-width: 1024px) {
      grid-template-columns: 1fr;
      gap: 1.5rem;
      padding: 1.5rem;
      min-height: auto;
    }

    &:last-child {
      border-bottom: none;
    }
  }

  .project-showcase-image {
    position: relative;
    overflow: hidden;
    order: 2;
    height: 300px;
    width: 400px;
    cursor: pointer;

    @media (max-width: 1024px) {
      order: 1;
      height: 60vh;
      width: 100%;
    }

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;

      &.project-img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: opacity 0.5s ease;

        &.tiny {
          filter: blur(10px);
          z-index: 1;
          display: block !important;
          width: 100% !important;
          height: 100% !important;
        }

        &.small {
          z-index: 2;
          opacity: 1;
        }

        &.full {
          z-index: 3;
          opacity: 0;
        }

        &.loaded {
          opacity: 1;
        }
      }
    }
  }

  .project-showcase-info {
    display: flex;
    flex-direction: column;
    order: 1;
    padding: 0;
    background-color: transparent;
    justify-content: flex-start;
    overflow-y: visible;
    padding-top: 1rem;

    @media (max-width: 1024px) {
      order: 2;
      padding: 0;
      height: auto;
    }

    .showcase-logo {
      width: 80px;
      height: 80px;
      margin-bottom: 2rem;
      background-color: #1a1a1a;
      padding: 8px;
      border-radius: 4px;

      img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        filter: brightness(0) invert(1);
      }
    }

    .showcase-title {
      font-size: 1.5rem;
      font-weight: 700;
      line-height: 1.2;
      margin-bottom: 0.5rem;
      color: #1a1a1a;

      @media (max-width: 1024px) {
        font-size: 1.3rem;
      }
    }

    .showcase-location {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: #999;
      margin-bottom: 0.5rem;
    }

    .showcase-year {
      font-size: 0.75rem;
      font-weight: 500;
      color: #999;
      margin-bottom: 1rem;
    }

    .showcase-excerpt {
      display: none;
    }

    .showcase-link {
      display: none;
    }
  }

  .main-category {
    text-decoration: none;
    color: #999;
    font-size: 0.9rem;
    font-weight: 500;
    letter-spacing: 0.3px;
    cursor: pointer;
    transition: all 0.3s ease;
    padding: 0.5rem 0;
    display: inline-flex;
    align-items: center;
    gap: 0.6rem;
    white-space: nowrap;

    &:hover {
      color: #2c3e50;
    }

    &.active {
      color: #2c3e50;
    }

    .dot {
      width: 6px;
      height: 6px;
      background-color: transparent;
      border-radius: 50%;
      transition: background-color 0.3s ease;
    }

    &.active .dot {
      background-color: #2c3e50;
    }
  }

  /* Container and layout */
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const filterBtns = document.querySelectorAll('.filter-btn');
    const sidebarCategories = document.querySelectorAll('.sidebar-category');
    const sidebarToggle = document.getElementById('sidebarToggle');
    const projectsSidebar = document.getElementById('projectsSidebar');
    const sidebarOverlay = document.getElementById('sidebarOverlay');
    const projectItems = document.querySelectorAll('.project-showcase-item');

    // Sidebar Toggle
    sidebarToggle.addEventListener('click', function() {
      projectsSidebar.classList.toggle('active');
      sidebarOverlay.classList.toggle('active');
    });

    // Close sidebar when overlay is clicked
    sidebarOverlay.addEventListener('click', function() {
      projectsSidebar.classList.remove('active');
      sidebarOverlay.classList.remove('active');
    });

    // Filter by filter buttons (desktop)
    filterBtns.forEach(btn => {
      btn.addEventListener('click', function(e) {
        e.preventDefault();
        const filter = this.getAttribute('data-category');
        filterProjects(filter);

        // Update active button
        filterBtns.forEach(b => b.classList.remove('active'));
        this.classList.add('active');

        // Update sidebar active state
        sidebarCategories.forEach(cat => cat.classList.remove('active'));
        document.querySelector(`.sidebar-category[data-category="${filter}"]`).classList.add('active');
      });
    });

    // Filter by sidebar categories (mobile/tablet)
    sidebarCategories.forEach(category => {
      category.addEventListener('click', function(e) {
        e.preventDefault();
        const filter = this.getAttribute('data-category');
        filterProjects(filter);

        // Update active category
        sidebarCategories.forEach(c => c.classList.remove('active'));
        this.classList.add('active');

        // Update desktop active state
        filterBtns.forEach(btn => btn.classList.remove('active'));
        document.querySelector(`.filter-btn[data-category="${filter}"]`).classList.add('active');

        // Close sidebar
        projectsSidebar.classList.remove('active');
        sidebarOverlay.classList.remove('active');
      });
    });

    function filterProjects(filter) {
      projectItems.forEach(item => {
        const category = item.getAttribute('data-category');
        if (filter === 'all' || category === filter) {
          item.style.display = 'grid';
        } else {
          item.style.display = 'none';
        }
      });
    }

    // ===== Lazy Loading Images =====
    function initImageLazyLoading() {
      const projectImages = document.querySelectorAll('.project-showcase-image');

      projectImages.forEach(container => {
        const tinyImg = container.querySelector('.project-img.tiny');
        const smallImg = container.querySelector('.project-img.small');
        const fullImg = container.querySelector('.project-img.full');

        if (!tinyImg || !smallImg || !fullImg) return;

        // Get the source URL from the small image
        const imageSrc = smallImg.src.replace('?tr=h-700', '');

        // Set full resolution URL (without transformation)
        fullImg.src = imageSrc;

        // Make image clickable to navigate to project
        container.addEventListener('click', function() {
          const projectLink = this.closest('.project-showcase-item').querySelector('.showcase-link');
          if (projectLink && projectLink.href) {
            window.location.href = projectLink.href;
          }
        });

        // Intersection Observer for lazy loading
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const imageContainer = entry.target;
              const fullImage = imageContainer.querySelector('.project-img.full');

              // Preload full resolution image
              if (fullImage && fullImage.src) {
                fullImage.onload = () => {
                  fullImage.classList.add('loaded');
                };
              }

              observer.unobserve(imageContainer);
            }
          });
        }, {
          rootMargin: '100px'
        });

        observer.observe(container);
      });

      // Responsive image loading based on viewport width
      function handleViewportChange() {
        projectImages.forEach(container => {
          const smallImg = container.querySelector('.project-img.small');
          const fullImg = container.querySelector('.project-img.full');

          if (!smallImg || !fullImg) return;

          const viewport = window.innerWidth;

          // Load full resolution on larger screens
          if (viewport > 1200 && fullImg.src && !fullImg.classList.contains('loaded')) {
            fullImg.onload = () => {
              fullImg.classList.add('loaded');
            };
          }
        });
      }

      // Listen for viewport changes
      window.addEventListener('resize', handleViewportChange);
      handleViewportChange();
    }

    // Initialize lazy loading
    initImageLazyLoading();
  });
</script>
